// open key, read key, write key (?)

#include <stdio.h>
#include <windows.h>
#pragma comment(lib, "advapi32.lib")

#define BUFFER_SIZE 1000

int main() {

	HKEY hKey;
	char pvData[BUFFER_SIZE];
	DWORD pcbData = BUFFER_SIZE;

	char dataToWrite[] = "something a bit nicer :)";
	size_t data_len = sizeof(dataToWrite);

	if (!RegCreateKeyExA( HKEY_CURRENT_USER, "Software\\PE-bear\\PE-bear", 0, NULL, REG_OPTION_NON_VOLATILE, KEY_ALL_ACCESS, NULL, &hKey, NULL))
		printf("Opened key, now modifying value..\n");
	
	if (!RegSetValueExA( hKey, "NewValue", NULL, REG_SZ, (BYTE *)dataToWrite, data_len))
		printf("Reg value succesfully set\n");
	
	RegGetValueA( HKEY_CURRENT_USER, "Software\\PE-bear\\PE-bear", "NewValue", RRF_RT_ANY, NULL, pvData, &pcbData);
	
	printf(pvData);
	
	
}
